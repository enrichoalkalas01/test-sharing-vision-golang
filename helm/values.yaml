# ==============================================
# HELM CHART FORMAT 3 - RECOMMENDED
# Gabungan: Simple + Lengkap + Flexible
# ==============================================

# App Info
appName: test-sharing-vision-golang
namespace: others

# Replicas
replicaCount: 1

# Image Configuration
image:
    repository: 192.168.20.21/other/test-sharing-vision-golang # Registry Anda 192.168.20.21, bukan 192.168.20.11
    tag: "latest"
    pullPolicy: Always

# Image Pull Secrets (untuk private registry)
imagePullSecrets:
    - name: harbor-creds

# Name Override
nameOverride: ""
fullnameOverride: ""

# Container Configuration
containerPort: 8080

# Service Configuration
service:
    type: ClusterIP # Ganti ke ClusterIP karena pakai Ingress
    port: 8080
    targetPort: 8080
    nodePort: 30100 # hanya untuk NodePort (range: 30000-32767)

# Ingress Configuration
ingress:
    enabled: true # Enable karena Anda pakai ingress nginx
    className: nginx
    annotations:
        nginx.ingress.kubernetes.io/rewrite-target: /
    hosts:
        - host: "" # kosong untuk wildcard, atau isi domain
          paths:
              - path: /api/golang-test
                pathType: Prefix
    tls: []

# Health Check / Probes
probe:
    enabled: true
    liveness:
        path: /health # pastikan endpoint ini ada di app
        port: 8080
    readiness:
        path: /health
        port: 8080

# Resources
resources:
    requests:
        cpu: 100m
        memory: 128Mi
    limits:
        cpu: 200m
        memory: 256Mi

# Autoscaling (HPA)
autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80
    targetMemoryUtilizationPercentage: 80

# Environment Variables
env: []
# - name: ENVIRONMENT
#   value: "production"
# - name: DATABASE_URL
#   valueFrom:
#     secretKeyRef:
#       name: db-secret
#       key: url

# Environment from ConfigMap/Secret
envFrom: []
# - configMapRef:
#     name: app-config
# - secretRef:
#     name: app-secret

# Volume Mounts
volumeMounts: []
# - name: config-volume
#   mountPath: /app/config

# Volumes
volumes: []
# - name: config-volume
#   configMap:
#     name: app-config

# Host Aliases
hostAliases: []
# - ip: "192.168.20.8"
#   hostnames:
#     - "kafka.local"

# Node Selector
nodeSelector: {}
# disktype: ssd

# Tolerations
tolerations: []
# - key: "dedicated"
#   operator: "Equal"
#   value: "app"
#   effect: "NoSchedule"

# Affinity
affinity: {}
# podAntiAffinity:
#   requiredDuringSchedulingIgnoredDuringExecution:
#   - labelSelector:
#       matchLabels:
#         app: test-sharing-vision-golang
#     topologyKey: kubernetes.io/hostname

# Pod Security Context
podSecurityContext: {}
# fsGroup: 1000

# Container Security Context
securityContext: {}
# runAsNonRoot: true
# runAsUser: 1000

# Service Account
serviceAccount:
    create: false
    name: ""
    annotations: {}
